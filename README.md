# Проект 2. Поиск вакансий (Headhunter parser)
## (Итоговая работа к Модулю 4 курса)
-- 2024-11-08 --

# 1. Что представляет собой проект?
Проект представляет собой программу, которая позволяет получать информацию о вакансиях с платформы hh.ru в России, 
сохранять ее в файл и (удобно) работать с ней: добавлять, фильтровать, 

# 2 Что реализовано?
* Реализован класс - HeadHunterAPI, наследующийся от абстрактного класса, для работы с платформой hh.ru. Класс умет подключаться к API и получать вакансии. Вакансии представляют json-объект - список словарей.

* Создан класс для работы с вакансиями - Validator. Класс предназначен для первичной обработки (сырых) данных, из 
  API. В каждой вакансии (каждом словаре) класс Validator выбирает нужные для дальнейшей работы ключи. Выбираются ключи:
  'id', 'name', 'salary', 'published_at', 'archived', 'apply_alternate_url', 'snippet'. Ключ 'salary' содержит 
  вложенный словарь с ключами 'from' и 'to'. Ключ 'salary' заменяется на ключи 'salary_from' и 'salary_to' с 
  переносом соответствующих значений. Ключ 'snippet' также содержит вложенные словари с ключами 'requirement' и 
  'responsibility'. Ключ 'snippet' заменяется на ключи 'requirement' и 'responsibility' с переносом соответствующих 
  значений. Таким образом итого работы класса Validator является переформатированный словарь с данными о вакансии.

* Создан класс Vacancy, который принимает переформатированный словарь с данными о вакансии и создаёт объект 
  (экземпляр класса) vacancy. Атрибуты каждого экземпляра соответствуют (переформатированным) данным словаря.
Класс Vacancy имеет переопределённые методы: строкового представления экземпляра класса для пользователя (__str__), 
  строкового представления экземпляра класса для разработчика (__repr__), сравнения на эквивалентность по ключам 
  'salary_from' и 'salary_to' (__eq__), сравнения на меньше (__lt__), сравнения на больше (__gt__).
Класс Vacancy имеет методы класса:
  * cast_to_object_list - метод для спискового создания экземпляров класса
  * print_obj_vacancies_list - метод для вывода строкового представления экземпляров класса на экран
  * print_vacancies_list - метод для вывода на экран первых N элементов списка словарей вакансий
  * sort_vacancies_by_keyword - метод для сортировки вакансий по ключу (используется для вывода ТОП вакансий по 
    заработной плате)
  * filter_vacancies_by_keyword - метод для фильтрации вакансий по ключевому слову (поиск ключевого слова 
    производится в ключах 'name' вакансий)
  * filter_vacancies_by_salary_diapason - метод для фильтрации вакансий по диапазону заработных план (поиск по ключам 'salary_from' и 'salary_to')
  * delete_vacancy - метод для удаления вакансии из списка вакансий (поиск по ключу 'id')
Также класс имеет приватные методы, использующиеся методами класса для разделения ответственности улучшения 
    читабельности кода.

* Создан класс FileWorker для работы с файлами. Класс позволяет записывать данные о вакансия в файл и читать данные 
  из файла. Класс имеет дочерние классы, в который реализованы возможности для работы с файлами разных форматов:
  * класс JsonWorker и методы: write_file для записи данные в json-файл, read_file - для чтения данный из json-файла.
  * класс CsvWorker и методы: write_file для записи данные в csv-файл, read_file - для чтения данный из csv-файла.
  * класс ExcelWorker и методы: write_file для записи данные в excel-файл, read_file - для чтения данный из 
    excel-файла.

* Указанные классы работают с json-объектами, т.е. принимают для записи список словарей и читают данные в список 
  словарей. Чтобы подготовить данные класса Vacancy (список экземпляров класса) для записи в файл, создан класс 
  JsonSaver, который имеет метод add_vacancy. Метод принимает экземпляр класса Vacancy и записывает в json-объект, 
  предназначенный для записи в файл.

## Общая логика работы приложения
1. Методами класса HeadHunterAPI создаётся подключение к API.
2. Методом класса Validator полученные из API данные приводятся к нужному виду.
3. Методы класса Vacancy позволяют оперировать вакансиями: сравнивать вакансии по зарплате, сортировать по ключу и 
   выводить на экран ТОП-список вакансий, фильтровать вакансии по ключу, удалять вакансии по id.
4. Для записи вакансий из класса Vacancy в файл нужно вызвать метод add_vacancy класса JsonSaver и, полученный 
   json-объект передать в соответствующий дочерний класс класса FileWorker.
5. Чтение данных из файла также производится соответствующим методом одного из дочерних классов класса FileWorker. 
   Затем эти данные отдаются в метод cast_to_object_list класса Vacancy.

## Мои выводы
1. Скорее всего класс JsonSaver является лишним с точки зрения общей логики. Но с точки зрения разделения 
   ответственности он берёт на себя работу, которая не совсем относится к классу вакансий.

## Для всей функциональности написаны тесты

## Результаты работы линтеров
* flake8: 
Все ошибки, которые выдаёт flake8 связяны с длиной строк, превышающей 119 символов. Все длинные строки находятся в 
  json-объектах (словарях) содержащих информацию о вакансиях. Применить символ '\' для переноса сток я не могу, т.к.
  это нарушит структуру строк и скажется на работе тестов. В целом длинные строки не мешают работе приложения и не 
  нарушают консистентность кода.
* mypy:
  * 4 ошибки связаны с отсутствием аннотации указателя 'other' в методах __eq__, __lt__, __gt__. Статический 
    анализатор не знает тип аргумента 'other' и считает его, как Any. По этой причине статический анализатор считает, 
    что тип возвращаемого значения также должен быть Any. 
  * 1 ошибка выглядит так: <code>Argument "params" to "get" has incompatible type "dict[str, object]"; expected 
    "SupportsItems[str | bytes | int | float, str | bytes | int | float | Iterable[str | bytes | int | float] | 
    None] | tuple[str | bytes | int | float, str | bytes | int | float | Iterable[str | bytes | int | float] | None]
    | Iterable[tuple[str | bytes | int | float, str | bytes | int | float | Iterable[str | bytes | int | float] | 
    None]] | str | bytes | None"  [arg-type]</code>
  Я не смог найти объяснение этой ошибки. Атрибут класса HeadHunterAPI для подключения к API имеет стандартный вид, 
    описанный в документации на сайте https://api.hh.ru/openapi/redoc#section/Obshaya-informaciya/Paginaciya.
  * Ошибка <code>main.py:287: error: Argument 1 to "add_vacancy" of "JsonSaver" has incompatible type "dict[Any, 
    Any]"; expected "Vacancy"  [arg-type]</code> говорит о том, что в метод 'add_vacancy' принимает словарь. Не могу 
    понять 
    почему статический анализатор так считает. Проверка типа аргумента 'vacancy' говорит о его принадлежности 
    классу Vacancy. Пока не вижу способа устранить ошибку.
